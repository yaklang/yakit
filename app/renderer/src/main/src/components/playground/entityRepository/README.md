# Entity Repository Component

## 功能概述

Entity Repository组件是一个完整的实体关系管理界面，支持实体仓库、实体、关系的查询和管理，以及ERM图表的生成和可视化。

## 主要功能

### 1. 实体仓库管理
- 查看所有实体仓库列表
- 显示仓库ID、名称和描述
- 点击"View Entities"按钮查看仓库内的实体

### 2. 实体管理
- 查看指定仓库内的所有实体
- 支持按类型、名称、ID进行筛选
- 显示实体的属性信息
- 支持多选实体
- 每个实体都有"Generate ERM"按钮，可快速生成该实体的ERM图

### 3. 关系管理
- 查看指定仓库内的所有关系
- 支持按类型、源实体ID、目标实体ID进行筛选
- 显示关系的属性信息

### 4. ERM图表生成
- 支持指定实体ID和深度参数
- 自动将DOT代码转换为SVG格式
- 提供SVG视图和DOT代码视图的切换
- 支持批量实体选择生成ERM图

## 技术特性

### 1. 数据筛选
- 所有筛选条件都是可选的
- 支持多值筛选（逗号分隔）
- 实时搜索和结果更新

### 2. 分页支持
- 表格支持分页和页面大小调整
- 分页控件始终可见
- 支持快速跳转和总数显示

### 3. 响应式设计
- 表格支持水平和垂直滚动
- 自适应不同屏幕尺寸
- 移动端友好的界面布局

### 4. SVG渲染
- 使用@viz-js/viz库将DOT代码转换为SVG
- 支持图表缩放和滚动
- 自动加载和错误处理

## 使用方法

### 1. 查看实体仓库
1. 在"Repositories"标签页查看所有仓库
2. 点击"View Entities"按钮进入实体管理

### 2. 筛选实体
1. 在"Entities"标签页使用筛选表单
2. 可以按类型、名称、ID进行筛选
3. 支持多选实体进行批量操作

### 3. 生成ERM图
1. 选择单个实体：点击"Generate ERM"按钮
2. 选择多个实体：使用复选框选择，点击"Generate ERM for Selected"
3. 手动设置：在"ERM Diagram"标签页输入参数
4. 设置深度：1-10层，默认2层

### 4. 查看ERM图
1. SVG视图：默认显示，支持缩放和滚动
2. DOT代码视图：查看原始DOT代码
3. 使用视图切换按钮在两种模式间切换

## 依赖库

- **@viz-js/viz**: DOT代码转SVG渲染
- **Ant Design**: UI组件库
- **ahooks**: React Hooks工具库

## 注意事项

1. viz.js库需要时间加载，首次使用可能需要等待
2. 复杂的DOT代码可能需要较长的渲染时间
3. 建议在生成大型ERM图时设置合适的深度参数
4. SVG视图支持浏览器标准的缩放和滚动操作

## 故障排除

### 1. viz.js加载失败
- 检查网络连接
- 刷新页面重试
- 查看控制台错误信息

### 2. SVG渲染失败
- 检查DOT代码语法是否正确
- 尝试减少深度参数
- 查看控制台错误信息

### 3. 分页控件不可见
- 检查表格容器高度设置
- 确保CSS样式正确加载
- 尝试调整浏览器窗口大小
